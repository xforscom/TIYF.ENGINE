{
  "schemaVersion": "1.3.0",
  "run": {
    "runId": "RUN-DEMO-OANDA"
  },
  "adapter": {
    "type": "oanda-demo",
    "settings": {
      "baseUrl": "https://api-fxpractice.oanda.com/v3/",
      "accessToken": "env:OANDA_PRACTICE_TOKEN",
      "accountId": "env:OANDA_PRACTICE_ACCOUNT_ID",
      "maxOrderUnits": 100000,
      "requestTimeoutSeconds": 10,
      "retryInitialDelaySeconds": 0.2,
      "retryMaxDelaySeconds": 2,
      "retryMaxAttempts": 5,
      "handshakeEndpoint": "/accounts/{accountId}/summary",
      "orderEndpoint": "/accounts/{accountId}/orders",
      "brokerDailyLossCapCcy": 1000,
      "brokerMaxUnits": 500000,
      "brokerSymbolUnitCaps": {
        "EURUSD": 200000,
        "GBPUSD": 200000
      },
      "useMock": false,
      "stream": {
        "enable": true,
        "baseUrl": "https://stream-fxpractice.oanda.com/v3/",
        "pricingEndpoint": "/accounts/{accountId}/pricing/stream",
        "heartbeatTimeoutSeconds": 15,
        "maxBackoffSeconds": 10,
        "feedMode": "live",
        "replayTicksFile": "data/ticks/replay.csv"
      }
    }
  },
  "InstrumentFile": "sample-instruments.csv",
  "InputTicksFile": "sample-ticks.csv",
  "BrokerId": "oanda-practice",
  "AccountId": "env:OANDA_PRACTICE_ACCOUNT_ID",
  "universe": [
    "EURUSD",
    "GBPUSD",
    "USDJPY",
    "USDCHF",
    "USDCAD",
    "AUDUSD",
    "NZDUSD",
    "XAUUSD"
  ],
  "risk": {
    "perTradeRiskPct": 0.05,
    "realLeverageCap": 2.0,
    "global_volatility_gate": {
      "enabled_mode": "live",
      "entry_threshold": 0.0,
      "ewma_alpha": 0.3,
      "live_max_bucket": "moderate",
      "components": [
        { "name": "fx_atr_percentile", "weight": 0.6 },
        { "name": "risk_proxy_z", "weight": 0.4 }
      ]
    },
    "promotion": {
      "enabled": true,
      "shadow_candidates": ["strategyA", "strategyB"],
      "probation_days": 30,
      "min_trades": 50,
      "promotion_threshold": 0.6,
      "demotion_threshold": 0.4
    },
    "risk_rails_mode": "live",
    "broker_daily_loss_cap_ccy": 1000,
    "max_position_units": 500000,
    "symbol_unit_caps": {
      "EURUSD": 200000,
      "GBPUSD": 200000
    },
    "cooldown": {
      "enabled": true,
      "consecutive_losses": 2,
      "minutes": 30
    }
  },
  "featureFlags": {
    "risk": "active"
  }
}
